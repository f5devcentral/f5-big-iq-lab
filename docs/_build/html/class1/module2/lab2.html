<!DOCTYPE html>
<head>
  
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-PPZPQ6');</script>
  <!-- End Google Tag Manager -->
    <title>Lab 2.2: Create custom security policy &amp; Application Service Catalog Template</title>
  

  <meta charset="utf-8">
  <!-- Twitter Bootstrap viewport setting -->
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- F5 metadata -->
  <meta name="title" content="Lab 2.2: Create custom security policy &amp; Application Service Catalog Template"/>
  <meta name="product" content="F5 BIG-IQ &amp; Cloud Edition Lab"/>
  <meta name="version" content=""/>
  <meta name="updated_date"  content="2019-07-26 04:33:11"/>
  <meta name="archived" content="Archived documents excluded"/>
  <meta name="doc_type" content="Manual"/>
  <meta name="lifecycle" content="release"/>
  <meta name="F5 BIG-IQ &amp; Cloud Edition Lab" content=""/>


  

  
  <link href="https://cdn.f5.com/favicon.ico" rel="icon">

</head>
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Lab 2.2: Create custom security policy &amp; Application Service Catalog Template &#8212; F5 BIG-IQ &amp; Cloud Edition Lab  documentation</title>
    <link rel="stylesheet" href="../../_static/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/css/f5_agility_theme.css" />
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/f5.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/f5-theme.css" type="text/css" />
    <link rel="stylesheet" href="/assets/css/CoveoFullSearch.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="https://use.fontawesome.com/21fb8a09c3.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Lab 2.3: Create Application using Service Catalog Template" href="lab3.html" />
    <link rel="prev" title="Lab 2.1: Service Catalog Built-in templates" href="lab1.html" />

  
    

  
  </head><body>
  <div id="clouddocs-header"></div>

    <div id="sidebar" class="section-nav">
      
      <!--  version selector ------------------>
      <div id="version_selector_wrapper">
      </div>
      <nav class="nav-sidebartoc">

        
         <h5>F5 BIG-IQ & Cloud Edition Lab  </h5>
        
<div id="searchbox" role="search">
  <form class="search" action="../../search.html" method="get">
    <input type="text" class="search" name="q" placeholder=" Search..." />
    <button type="submit" class="btn btn-info navbar-btn"><i class="fa fa-search"></i></button>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        <hr>
        <span class="nav-sidebartoc">
            <p class="caption"><span class="caption-text">Contents/Lab:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../class1.html">Class 1: BIG-IQ Application Management and AS3 (Cloud Edition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class2/class2.html">Class 2: BIG-IQ Deployment with auto-scale on AWS, Azure &amp; VMware (Cloud Edition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class3/class3.html">Class 3:  BIG-IQ Analytics (Cloud Edition)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class4/class4.html">Class 4: BIG-IQ Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class5/class5.html">Class 5: BIG-IQ Device Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class6/class6.html">Class 6: BIG-IQ ADC Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class7/class7.html">Class 7: BIG-IQ Application Firewall Manager (AFM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class8/class8.html">Class 8: BIG-IQ Application Security Manager (ASM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class9/class9.html">Class 9: BIG-IQ Access Policy Manager (APM)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class10/class10.html">Class 10: BIG-IQ DNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../class11/class11.html">Class 11: BIG-IQ DDoS Monitoring and Dashboard</a></li>
</ul>

        </span><!-- Use this file to add extra links to the bottom of the ToC sidebar -->
<hr>
  <span class="nav-sidebartoc">
 <!-- insert content here -->
  </span>
      </nav>
    </div>


    <div id="right-sidebar">
      <h7 style="font-weight:normal">On this page:</h7>
      <nav class="nav-sidebartoc">
        <span class="nav-sidebartoc">
            <ul>
<li><a class="reference internal" href="#">Lab 2.2: Create custom security policy &amp; Application Service Catalog Template</a></li>
</ul>

         </span>
      </nav>
    </div>





  
  <div class="main active" id="content" >
    <article class="docs-container site-article-inner">
              <!-- custom breadcrumb -->
        <h5>
            <a href="../../index.html">F5 BIG-IQ &amp; Cloud Edition Lab</a>
              &gt; <a href="../class1.html">Class 1: BIG-IQ Application Management and AS3 (Cloud Edition)</a>
              &gt; <a href="module2.html">Module 2: BIG-IQ Application Templates &amp; Deployment (Service Catalog)</a>

          <span class="right">
             <a href="../../_sources/class1/module2/lab2.rst.txt" rel="nofollow">Source</a> |
             <a href="https://github.com/f5devcentral/f5-big-iq-lab">Edit on <i class="fa fa-github" aria-hidden="true"></i></a>
          </span>
        </h5>
        <!-- end custom breadcrumb -->
      


    <!--a title="Export PDF" id="export-pdf" class="btn btn btn-link pull-right">View PDF</a-->
    <button type="button" id="export-pdf" class="btn btn-link right">PDF</button>


    
     
         <div class="sidebar" id="version-warning" style="display: none;">
           <p class="first sidebar-title">
           <span class="icon fa fa-info-circle fa-lg"></span> Version notice:</p>
           <p class="last" id="currentVersion"></p>
          </div>


     <div role="main">
        
  <div class="section" id="lab-2-2-create-custom-security-policy-application-service-catalog-template">
<h1>Lab 2.2: Create custom security policy &amp; Application Service Catalog Template<a class="headerlink" href="#lab-2-2-create-custom-security-policy-application-service-catalog-template" title="Permalink to this headline">¶</a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Starting BIG-IQ 6.1, AS3 should be the preferred method to deploy application services through BIG-IQ.</p>
</div>
<p>Connect as <strong>larry</strong></p>
<ol class="arabic simple">
<li><p>Create the custom ASM policy, go to <em>Configuration</em> &gt; <em>SECURITY</em> &gt; <em>Web Application Security</em> &gt; <em>policies</em>.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/img_module2_lab2_1.png"><img alt="../../_images/img_module2_lab2_1.png" class="align-center" src="../../_images/img_module2_lab2_1.png" style="width: 1553.5px; height: 840.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Select the <code class="docutils literal notranslate"><span class="pre">f5-asm-policy1</span></code> ASM policy from the list and look through its settings. Notice the policy is in Transparent mode.</p>
<p>Edit the Policy <code class="docutils literal notranslate"><span class="pre">f5-asm-policy1</span></code>, notice the leaning mode is set to <code class="docutils literal notranslate"><span class="pre">manual</span></code>. Above Learning Mode select <code class="docutils literal notranslate"><span class="pre">Make</span> <span class="pre">available</span> <span class="pre">in</span> <span class="pre">Application</span> <span class="pre">Templates</span></code>, click Save.</p>
<a class="reference internal image-reference" href="../../_images/img_module2_lab2_4.png"><img alt="../../_images/img_module2_lab2_4.png" class="align-center" src="../../_images/img_module2_lab2_4.png" style="width: 602.0px; height: 483.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want the client IP/Country visible in the Security Analytics, set <code class="docutils literal notranslate"><span class="pre">Trust</span> <span class="pre">XFF</span> <span class="pre">Header</span></code> to <code class="docutils literal notranslate"><span class="pre">Yes</span></code> (if not already set)</p>
</div>
<p>Go to <em>POLICY BUILDING</em> &gt; <em>Settings</em> and set <em>Learning Mode</em> to <code class="docutils literal notranslate"><span class="pre">Automatic</span></code>, <em>Policy Building Mode</em> to <code class="docutils literal notranslate"><span class="pre">Central</span></code> and <em>Auto-Deploy Policy</em> to <code class="docutils literal notranslate"><span class="pre">Disable</span></code> click Save &amp; Close.</p>
<a class="reference internal image-reference" href="../../_images/img_module2_lab2_4b.png"><img alt="../../_images/img_module2_lab2_4b.png" class="align-center" src="../../_images/img_module2_lab2_4b.png" style="width: 1074.0px; height: 750.5px;" /></a>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">f5-asm-policy1</span></code> is based of <code class="docutils literal notranslate"><span class="pre">templates-default</span></code> policy. The intent for the initial release 6.0 was to be able to push a basic (negative only) security policy that can provide a basic level of protection for most applications.
For 6.0, it is recommended that learning shouldn’t be enabled with app templates – it should be a fundamental policy.
However, if you want to use learning/blocking mode, you will need a dedicated app template per application.</p>
</div>
<p>Connect as <strong>david</strong> (or <strong>marco</strong>)</p>
<p>1. Create a Clone of the <em>Default-f5-HTTPS-WAF-lb-template</em> policy, go to <em>Applications</em> &gt; <em>SERVICE CATALOG</em>, and click on <em>Clone</em>.
Enter the name of your cloned template: <code class="docutils literal notranslate"><span class="pre">f5-HTTPS-WAF-lb-template-custom1</span></code>.</p>
<a class="reference internal image-reference" href="../../_images/img_module2_lab2_7.png"><img alt="../../_images/img_module2_lab2_7.png" class="align-center" src="../../_images/img_module2_lab2_7.png" style="width: 1555.5px; height: 840.5px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Then select the ASM policy <code class="docutils literal notranslate"><span class="pre">f5-asm-policy1``and</span> <span class="pre">the</span> <span class="pre">Logging</span> <span class="pre">Profile</span> <span class="pre">``templates-default</span></code> in the SECURITY POLICIES section on both Virtual Servers (Standalone Device).</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The virtual servers within the same application have to use the same ASM policies. Therefore, the ASM policy attached to the 1st virtual server will apply to ALL the virtual servers automatically.</p>
</div>
<a class="reference internal image-reference" href="../../_images/img_module2_lab2_8.png"><img alt="../../_images/img_module2_lab2_8.png" class="align-center" src="../../_images/img_module2_lab2_8.png" style="width: 1377.5px; height: 817.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Save &amp; Close</p>
<a class="reference internal image-reference" href="../../_images/img_module2_lab2_9.png"><img alt="../../_images/img_module2_lab2_9.png" class="align-center" src="../../_images/img_module2_lab2_9.png" style="width: 1548.0px; height: 835.5px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<ol class="arabic simple" start="3">
<li><p><strong>[New 6.0.1]</strong> Publish your custom template after creation.</p></li>
</ol>
<a class="reference internal image-reference" href="../../_images/img_module2_lab2_9b.png"><img alt="../../_images/img_module2_lab2_9b.png" class="align-center" src="../../_images/img_module2_lab2_9b.png" style="width: 591.0px; height: 127.0px;" /></a>
<p>4. In order to allow Paula to use the custom application template, go to : <em>System</em> &gt; <em>Role Management</em> &gt; <em>Roles</em>
and select <em>CUSTOM ROLES</em> &gt; <em>Application Roles</em> &gt; <em>Application Creator VMware</em> role (already assigned to Paula). Select the Template <em>f5-HTTPS-WAF-lb-template-custom1</em>, drag it to the right.</p>
<a class="reference internal image-reference" href="../../_images/img_module2_lab2_10.png"><img alt="../../_images/img_module2_lab2_10.png" class="align-center" src="../../_images/img_module2_lab2_10.png" style="width: 917.0px; height: 519.0px;" /></a>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Click on <em>Save &amp; Close</em></p>
</div>


     </div>
    
     <div class="row next-prev-btn-row">
       <div class="col-lg-12">
       
        <a href="lab1.html" title="Lab 2.1: Service Catalog Built-in templates" accesskey="p" class="btn btn-primary left"><i class="fa fa-arrow-circle-left" aria-hidden="true"></i> Previous</a>
       
       
          <a href="lab3.html" title="Lab 2.3: Create Application using Service Catalog Template" accesskey="n" class="btn btn-primary right">Next <i class="fa fa-arrow-circle-right" aria-hidden="true"></i></a>
       
     </div>
     </div>
    

    </article>
  </div>

</div>


  <div id="clouddocs-footer"></div>
  <!-- Bootstrap core JavaScript
  ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->

  <script src="../../_static/js/index.js"></script>
  <script src="../../_static/js/jquery.appear.js"></script>
  <script src="../../_static/js/printThis.js"></script>
  <script src="/assets/js/bootstrap.min.js"></script>
  <script src="/assets/js/clouddocs.js"></script>
  <script src="/assets/js/CoveoJsSearch.Lazy.min.js"></script>
  </body>
</html>